<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= pet.name %> - Pet Details</title>
    <link rel="stylesheet" href="/pet-details.css">
</head>
<body>
    <h1><%= pet.name %></h1>
    <p>Breed: <%= pet.breed %></p>
    <p>Age: <%= pet.age %> years</p>
    <p>Price: $<%= pet.price %></p>
    <p>Location: State: <%= pet.location.state %>, City: <%= pet.location.city %></p>
    <p>Description: <%= pet.description %></p>
    <p>Behavior: <%= pet.behavior %></p>
    <p>History: <%= pet.history %></p>

    <!-- Image Gallery -->
    <div class="gallery">
        <!-- Thumbnail Images -->
        <div class="thumbnails">
            <% let images = []; %>
            <% if (pet.profileImage && pet.profileImage.url) { %>
                <% images.push({ url: pet.profileImage.url, alt: 'Profile Image' }); %>
            <% } %>
            <% pet.images.forEach(image => { %>
                <% images.push({ url: image.url, alt: 'Pet Image' }); %>
            <% }); %>

            <% images.forEach((image, index) => { %>
                <img 
                    class="thumbnail <%= index === 0 ? 'active' : '' %>" 
                    src="<%= image.url %>" 
                    alt="<%= image.alt %>" 
                    data-index="<%= index %>">
            <% }); %>
        </div>

        <!-- Main Image Display -->
        <div class="main-image">
            <img id="current-image" src="<%= images.length > 0 ? images[0].url : '/images/default-placeholder.png' %>" alt="Main Image">
        </div>
    </div>

    <!-- Contact Owner Button -->
    <a href="/contact/<%= pet._id %>">
        <button>Contact Owner</button>
    </a>
    <a href="/">Back to List</a>

    <!-- JavaScript to handle image switching -->
    <script>
        const thumbnails = document.querySelectorAll('.thumbnail');
        const currentImage = document.getElementById('current-image');

        thumbnails.forEach((thumbnail, index) => {
            thumbnail.addEventListener('click', function() {
                // Remove 'active' class from all thumbnails
                thumbnails.forEach(tn => tn.classList.remove('active'));
                // Add 'active' class to clicked thumbnail
                this.classList.add('active');
                // Update the main image
                currentImage.src = this.src;
                currentImage.alt = this.alt;
            });
        });
    </script>
</body>
</html>
